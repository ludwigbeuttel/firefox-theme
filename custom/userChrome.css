/* https://github.com/KiKaraage/ArcWTF/blob/main/tweaks/popup-search.css */
@import url("popup-search.css");
@import url("popup-search-overrides.css");
/* https://github.com/KiKaraage/ArcWTF/blob/main/tweaks/sidebar.css */
@import url("sidebar.css");
@import url("sidebar-overrides.css");

:root {
  --toolbarbutton-icon-fill: var(--lwt-text-color) !important;
  --gnome-toolbar-icon-fill: var(--lwt-text-color) !important;
  --gnome-window-color: var(--lwt-text-color) !important;
  --gnome-menu-background: var(--lwt-accent-color) !important;
  --gnome-toolbar-background: var(--lwt-accent-color) !important;
  --gnome-toolbar-border-color: var(--lwt-accent-color) !important;
  --gnome-accent-bg: var(--lwt-accent-color) !important;
  --gnome-selection-bg: color-mix(
    in hsl longer hue,
    var(--lwt-text-color) 20%,
    transparent
  ) !important;

  --gnome-tabbar-tab-active-background: var(--gnome-selection-bg) !important;
  --gnome-tabbar-tab-hover-background: var(--gnome-selection-bg) !important;
  --gnome-tabbar-tab-active-hover-background: color-mix(
    in hsl longer hue,
    var(--lwt-text-color) 30%,
    transparent
  ) !important;

  --ltw-transition-duration: 0.2s;
  --ltw-transition-type: ease-in-out;
}

* {
  font-family: "Inter Variable", "Inter" !important;
  color: --lwt-tab-text !important;
}

:is(
    .webextension-browser-action,
    .eom-addon-button
  )[data-extensionid="userchrome-toggle@joolee.nl"]
  .toolbarbutton-icon {
  list-style-image: url("../theme/icons/toggle-sidebar-symbolic.svg") !important;
}

/* hide the tabs toolbar if one of the following sidebar extensions is active: */
/* Sidebery */
:root:not([customizing]):has(#sidebar-box[sidebarcommand="_3c078156-979c-498b-8990-85f7987dd929_-sidebar-action"]:not([hidden])),
/* Tree Style Tab */
:root:not([customizing]):has(#sidebar-box[sidebarcommand="treestyletab_piro_sakura_ne_jp-sidebar-action"]:not([hidden])),
/* Tab Center Reborn */
:root:not([customizing]):has(#sidebar-box[sidebarcommand="tabcenter-reborn_ariasuni-sidebar-action"]:not([hidden])) {
  & #TabsToolbar {
    display: none;
  }
}

#TabsToolbar {
  .tab-content::before {
    display: none !important;
  }
}

#navigator-toolbox {
  z-index: 2;
}

#nav-bar,
#nav-bar .urlbarView-body-outer,
.toolbar-items {
  background: unset !important;
  background-color: var(
    --lwt-accent-color,
    --gnome-headerbar-background
  ) !important;
  transition: background-color 0.2s ease-in-out !important;
}

#urlbar {
  .urlbar-page-action:not([hidden]) {
    display: grid;
    place-items: center;
  }

  &[open] :is(.urlbarView .urlbarView-body-outer) {
    border-radius: 0 0 6px 6px !important;
  }

  .search-one-offs {
    display: none !important;
  }

  .urlbarView-body-outer {
    outline-color: var(--lwt-accent-color) !important;
    color: var(--lwt-text-color) !important;
  }

  :is(#translations-button, #shopping-sidebar-button, #reader-mode-button) {
    display: none !important;
  }

  /* popout-search active */
  &:is([breakout][breakout-extend], [breakout][usertyping][focused]) {
    border-radius: 6px 6px 0 0 !important;
    outline: none !important;

    .urlbarView {
      /* margin-top: -18px !important; */
      margin-top: -2px !important;
      margin-left: -7px !important;
      border-radius: 0 0 6px 6px !important;
      width: calc(100% + 2px) !important;

      transition: max-height 0.2s ease-in-out !important;

      @starting-style {
        max-height: 0;
        overflow-y: hidden;
      }

      max-height: 440px;
    }

    .urlbar-input-container {
      transform: translateY(-5px);
    }
  }

  &[breakout][breakout-extend][pageproxystate="invalid"]:not([usertyping]) {
    #urlbar-input-container {
      margin-top: 10px !important;
    }
    .urlbarView {
      /* margin-top: -8px !important; */
      margin-top: -2px !important;
    }

    .urlbar-input-container {
      transform: translateY(-5px);
    }
  }
}
